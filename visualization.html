<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accepted Papers Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2rem;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        .stat-card h3 { font-size: 2.5rem; color: #00d4ff; }
        .stat-card p { color: #aaa; margin-top: 5px; }
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .chart-box {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
        }
        .chart-box h2 { margin-bottom: 15px; font-size: 1.2rem; color: #ddd; }
        .track-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 8px;
            margin-top: 20px;
        }
        .track-item {
            padding: 10px 5px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.85rem;
            font-weight: 500;
            transition: transform 0.2s;
            cursor: pointer;
        }
        .track-item:hover { transform: scale(1.05); }
        .track-item.has-papers {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: #fff;
        }
        .track-item.no-papers {
            background: linear-gradient(135deg, #d63031, #e17055);
            color: #fff;
        }
        .track-item .count { font-size: 1.1rem; font-weight: bold; }
        .section-title { font-size: 1.5rem; margin: 30px 0 15px; color: #fff; }
        .legend { display: flex; gap: 20px; margin-bottom: 15px; }
        .legend-item { display: flex; align-items: center; gap: 8px; }
        .legend-color { width: 20px; height: 20px; border-radius: 4px; }
        .legend-color.green { background: linear-gradient(135deg, #00b894, #00cec9); }
        .legend-color.red { background: linear-gradient(135deg, #d63031, #e17055); }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            overflow: hidden;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        th { background: rgba(0,212,255,0.2); font-weight: 600; }
        tr:hover { background: rgba(255,255,255,0.05); }
        @media (max-width: 768px) { .charts-container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Accepted Papers Track Distribution</h1>
        <div class="stats-grid">
            <div class="stat-card"><h3 id="totalPapers">-</h3><p>Total Papers</p></div>
            <div class="stat-card"><h3 id="totalTracks">-</h3><p>Tracks with Papers</p></div>
            <div class="stat-card"><h3 id="missingTracks">-</h3><p>Missing Tracks</p></div>
            <div class="stat-card"><h3 id="lectureCount">-</h3><p>Lectures</p></div>
            <div class="stat-card"><h3 id="posterCount">-</h3><p>Posters</p></div>
        </div>
        <div class="charts-container">
            <div class="chart-box"><h2>üìà Papers by Track (Top 20)</h2><canvas id="trackChart"></canvas></div>
            <div class="chart-box"><h2>üéØ Decision Distribution</h2><canvas id="decisionChart"></canvas></div>
        </div>
        <h2 class="section-title">üóÇÔ∏è All Tracks Status</h2>
        <div class="legend">
            <div class="legend-item"><div class="legend-color green"></div><span>Has Papers</span></div>
            <div class="legend-item"><div class="legend-color red"></div><span>No Papers (Missing)</span></div>
        </div>
        <div class="track-grid" id="trackGrid"></div>
        <h2 class="section-title">‚ùå Missing Tracks (No Results Yet)</h2>
        <table id="missingTable"><thead><tr><th>Track ID</th><th>Status</th></tr></thead><tbody id="missingBody"></tbody></table>
        <h2 class="section-title">üìã Track Details</h2>
        <table><thead><tr><th>Track ID</th><th>Total Papers</th><th>Lectures</th><th>Posters</th></tr></thead><tbody id="detailsBody"></tbody></table>
    </div>
    <script>
    fetch('accepted_papers.json').then(r => r.json()).then(data => {
        const trackStats = {};
        let lectureCount = 0, posterCount = 0;
        data.forEach(p => {
            const t = p.track_id;
            if (!trackStats[t]) trackStats[t] = { total: 0, lecture: 0, poster: 0 };
            trackStats[t].total++;
            if (p.final_decision.includes('Lecture')) { trackStats[t].lecture++; lectureCount++; }
            else if (p.final_decision.includes('Poster')) { trackStats[t].poster++; posterCount++; }
        });
        const allExpectedTracks = [];
        const ranges = {1:8,2:10,3:10,4:10,5:9,6:6,7:16,8:5,9:6,10:12,11:14,12:12,13:5,14:7,15:12};
        for (let m = 1; m <= 15; m++) for (let s = 1; s <= (ranges[m]||5); s++) allExpectedTracks.push(`${m}.${s}`);
        allExpectedTracks.push('16', '17');
        const existingTracks = Object.keys(trackStats);
        const missingTracks = allExpectedTracks.filter(t => !existingTracks.includes(t));
        document.getElementById('totalPapers').textContent = data.length;
        document.getElementById('totalTracks').textContent = existingTracks.length;
        document.getElementById('missingTracks').textContent = missingTracks.length;
        document.getElementById('lectureCount').textContent = lectureCount;
        document.getElementById('posterCount').textContent = posterCount;
        const trackGrid = document.getElementById('trackGrid');
        allExpectedTracks.forEach(track => {
            const div = document.createElement('div');
            const has = trackStats[track];
            div.className = `track-item ${has ? 'has-papers' : 'no-papers'}`;
            div.innerHTML = `<div>${track}</div><div class="count">${has ? trackStats[track].total : '‚úó'}</div>`;
            trackGrid.appendChild(div);
        });
        const missingBody = document.getElementById('missingBody');
        if (missingTracks.length === 0) missingBody.innerHTML = '<tr><td colspan="2">All tracks have papers!</td></tr>';
        else missingTracks.forEach(t => { const tr = document.createElement('tr'); tr.innerHTML = `<td>${t}</td><td style="color:#e17055">‚ö†Ô∏è No results yet</td>`; missingBody.appendChild(tr); });
        const detailsBody = document.getElementById('detailsBody');
        const sorted = Object.entries(trackStats).sort((a, b) => b[1].total - a[1].total);
        sorted.forEach(([t, s]) => { const tr = document.createElement('tr'); tr.innerHTML = `<td>${t}</td><td>${s.total}</td><td>${s.lecture}</td><td>${s.poster}</td>`; detailsBody.appendChild(tr); });
        const top20 = sorted.slice(0, 20);
        new Chart(document.getElementById('trackChart'), { type: 'bar', data: { labels: top20.map(t => t[0]), datasets: [{ label: 'Papers', data: top20.map(t => t[1].total), backgroundColor: 'rgba(0,212,255,0.7)', borderColor: 'rgba(0,212,255,1)', borderWidth: 1 }] }, options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, ticks: { color: '#aaa' }, grid: { color: 'rgba(255,255,255,0.1)' } }, x: { ticks: { color: '#aaa' }, grid: { color: 'rgba(255,255,255,0.1)' } } } } });
        new Chart(document.getElementById('decisionChart'), { type: 'doughnut', data: { labels: ['Lecture', 'Poster'], datasets: [{ data: [lectureCount, posterCount], backgroundColor: ['rgba(0,212,255,0.8)', 'rgba(123,44,191,0.8)'], borderWidth: 0 }] }, options: { responsive: true, plugins: { legend: { position: 'bottom', labels: { color: '#fff' } } } } });
    }).catch(e => { console.error(e); document.body.innerHTML = '<h1 style="color:red;text-align:center;margin-top:50px">Error loading data</h1>'; });
    </script>
</body>
</html>